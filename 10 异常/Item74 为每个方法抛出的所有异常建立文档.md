### Item74 为每个方法抛出的所有异常建立文档

> A description of the exceptions thrown by a method is an important part of the documentation required to use the method properly. Therefore, it is critically important that you take the time to carefully document all of the exceptions thrown by each method (Item 56).

对方法抛出的异常的描述是文档的一个重要组成部分，是正确使用这个方法所必须的。因此，花时间为每个方法抛出的所有异常仔细地建立异常是非常重要的（Item56）。

> **Always declare checked exceptions individually, and document precisely the conditions under which each one is thrown** using the Javadoc @throws tag. Don’t take the shortcut of declaring that a method throws some superclass of multiple exception classes that it can throw. As an extreme example, don’t declare that a public method throws Exception or, worse, throws Throwable. In addition to denying any guidance to the method’s user concerning the exceptions it is capable of throwing, such a declaration greatly hinders the use of the method because it effectively obscures any other exception that may be thrown in the same context. One exception to this advice is the main method, which can safely be declared to throw Exception because it is called only by VM.

**每一个受检异常都要单独声明，并且需要用@throws标签，准确说明每一个异常抛出的条件。**如果一个方法会抛出一些超类会抛出的几个异常类的超类，那么就不要使用快捷键来生成声明。一个极端的例子，一个公有方法不要声明抛出Exception，或者更糟糕的，声明抛出Throwable。这样不仅仅，不能方法的使用者提供他们关心的可抛出的异常的信息，并且这个声明还大大的妨碍了这个方法的使用，因为它覆盖了同一个上下文中可能抛出的所有异常。这条建议的一个例外是main方法，它可以声明抛出Exception，因为它只会被VM调用。

> While the language does not require programmers to declare the unchecked exceptions that a method is capable of throwing, it is wise to document them as carefully as the checked exceptions. Unchecked exceptions generally represent programming errors (Item 70), and familiarizing programmers with all of the errors they can make helps them avoid making these errors. A well-documented list of the unchecked exceptions that a method can throw effectively describes the *preconditions* for its successful execution. It is essential that every public method’s documentation describe its preconditions (Item 56), and documenting its unchecked exceptions is the best way to satisfy this requirement.

虽然Java语言不要求程序员声明方法可能抛出的非受检异常，但是仔细的为受检异常编写文档还是很明智的。非受检异常基本上可以代表程序错误（Item70），并且让程序员了解这些错误，也能让他们避免犯这些错误。方法可以抛出的非受检异常的列表的好的文档说明，可以有效地描述这个方法的可成功执行的先决条件。对于每个公有方法而言，描述其先决条件是很重要的（Item56），而给非受检异常编写文档是最好的满足这个要求的方法。

> It is particularly important that methods in interfaces document the unchecked exceptions they may throw. This documentation forms a part of the interface’s *general contract* and enables common behavior among multiple implementations of the interface.

对于接口而言，为其抛出的非受检异常写文档，尤其异常。这些文档说明组成了这个接口的通用约定的一部分，并制定了该接口的多个实现必须遵循的公共的行为。

> **Use the Javadoc** **@throws** **tag to document each exception that a method can throw, but do** **not** **use the** **throws** **keyword on unchecked exceptions.** It is important that programmers using your API are aware of which exceptions are checked and which are unchecked because the programmers’ responsibilities differ in these two cases. The documentation generated by the Javadoc @throws tag without a corresponding throws clause in the method declaration provides a strong visual cue to the programmer that an exception is unchecked.

**使用Javadoc的@throws标签来对方法抛出的每一个异常进行标注，但是不要对非受检异常使用throws关键字。**这非常重要，这样的话，使用你的API的程序员就可以知道哪些异常是受检的，哪些是非受检的，对于程序员而言，针对这两种异常的责任是不一样的。使用javadoc的@throws标签生成的文档说明中，在方法声明中没有对应的异常的话，就会有特别明显的提示信息，以提醒程序员这个异常是非受检的，

> It should be noted that documenting all of the unchecked exceptions that each method can throw is an ideal, not always achievable in the real world. When a class undergoes revision, it is not a violation of source or binary compatibility if an exported method is modified to throw additional unchecked exceptions. Suppose a class invokes a method from another, independently written class. The authors of the former class may carefully document all of the unchecked exceptions that each method throws, but if the latter class is revised to throw additional unchecked exceptions, it is quite likely that the former class (which has not undergone revision) will propagate the new unchecked exceptions even though it does not document them.

还需要注意的是，为每一个方法的所有的非受检异常进行文档说明，是非常理想化的，在现实中，基本都做不到。当类被修改以后，如果一个到处的方法修改了，会抛出额外的非受检异常，并不算违反源代码或者二进制的兼容性。假如一个类调用了另一个独立编写的类的方法，前面这个类的作者可能为每个方法的非受检异常都写了详细的文档，但是如果后面这个类修改了，抛出了其他的非受检异常，那么很有可能前面那个类（没有来得及更新）就会把这个新的非受检异常传播出去，即使它还没有为这个异常写文档说明。

> **If an exception is thrown by many methods in a class for the same reason, you can document the exception in the class’s documentation comment** rather than documenting it individually for each method. A common example is NullPointerException. It is fine for a class’s documentation comment to say, “All methods in this class throw a NullPointerException if a null object reference is passed in any parameter,” or words to that effect.

**如果一个类的好几个方法都抛出了同一个异常，并且异常抛出的原因相同，那么你就可以在这个类的文档中描述这个异常**，而不是在每个方法上都单独描述。一个常见的例子就是NullPointerException。在类的文档说明中，可以有这样的内容：“对于这个类里的所有方法，如果任何一个参数传入的对象引用为空，都会抛出NullPointerException。”或者是其他作用相同的话，也是可以的。

> In summary, document every exception that can be thrown by each method that you write. This is true for unchecked as well as checked exceptions, and for abstract as well as concrete methods. This documentation should take the form of @throws tags in doc comments. Declare each checked exception individually in a method’s throws clause, but do not declare unchecked exceptions. If you fail to document the exceptions that your methods can throw, it will be difficult or impossible for others to make effective use of your classes and interfaces.

总结一下，为你写的每一个方法可能抛出的异常建立文档。这一点对于受检异常和非受检异常都是用，对于抽象方法和具体方法也都使用。这个文档说明在文档注释中应该采用@throws标签。在一个方法的throws字句中为每一个受检异常作单独的声明，但是不要声明非受检异常。如果你没有为你的方法抛出的异常创建文档说明，那么对于其他用户而言就很难高效地使用你的类和接口。